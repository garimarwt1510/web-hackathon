import React, { useState, useContext, createContext } from 'react';
import { ShoppingCart, User, Menu, X, Plus, Minus, Star, MapPin, Clock, Phone, Search, Filter, Heart, Truck, Package, CheckCircle, ArrowLeft, Globe } from 'lucide-react';

// Context for global state management
const AppContext = createContext();

// Mock data
const products = [
  {
    id: 1,
    name: 'Premium Basmati Rice',
    category: 'Grains',
    price: 85,
    unit: 'per kg',
    image: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=300&h=200&fit=crop',
    supplier: 'Sharma Wholesale',
    rating: 4.5,
    deliveryTime: '2-4 hours',
    description: 'Premium quality basmati rice, perfect for biryani and pulao preparation.'
  },
  {
    id: 2,
    name: 'Refined Sunflower Oil',
    category: 'Oil',
    price: 120,
    unit: 'per liter',
    image: 'https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=300&h=200&fit=crop',
    supplier: 'Golden Oil Mills',
    rating: 4.3,
    deliveryTime: '1-2 hours',
    description: 'Pure refined sunflower oil for healthy cooking and frying.'
  },
  {
    id: 3,
    name: 'Red Chili Powder',
    category: 'Spices',
    price: 180,
    unit: 'per kg',
    image: 'https://images.unsplash.com/photo-1596040033229-a8a1b5d3b3c3?w=300&h=200&fit=crop',
    supplier: 'Spice Garden',
    rating: 4.7,
    deliveryTime: '3-5 hours',
    description: 'Premium red chili powder with authentic taste and aroma.'
  },
  {
    id: 4,
    name: 'Fresh Onions',
    category: 'Vegetables',
    price: 25,
    unit: 'per kg',
    image: 'https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=300&h=200&fit=crop',
    supplier: 'Fresh Veggies Co.',
    rating: 4.2,
    deliveryTime: '1-3 hours',
    description: 'Fresh red onions directly from farms, perfect for street food preparations.'
  },
  {
    id: 5,
    name: 'Paper Food Containers',
    category: 'Packaging',
    price: 150,
    unit: 'per 100 pcs',
    image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=200&fit=crop',
    supplier: 'EcoPack Solutions',
    rating: 4.4,
    deliveryTime: '4-6 hours',
    description: 'Eco-friendly paper food containers for takeaway orders.'
  },
  {
    id: 6,
    name: 'Turmeric Powder',
    category: 'Spices',
    price: 200,
    unit: 'per kg',
    image: 'https://images.unsplash.com/photo-1615485290382-441e4d049cb5?w=300&h=200&fit=crop',
    supplier: 'Spice Garden',
    rating: 4.6,
    deliveryTime: '3-5 hours',
    description: 'Pure turmeric powder with natural color and medicinal properties.'
  }
];

const suppliers = [
  {
    id: 1,
    name: 'Sharma Wholesale',
    rating: 4.5,
    products: 45,
    deliveryTime: '2-4 hours',
    location: 'Chandni Chowk, Delhi'
  },
  {
    id: 2,
    name: 'Golden Oil Mills',
    rating: 4.3,
    products: 15,
    deliveryTime: '1-2 hours',
    location: 'Karol Bagh, Delhi'
  },
  {
    id: 3,
    name: 'Spice Garden',
    rating: 4.7,
    products: 32,
    deliveryTime: '3-5 hours',
    location: 'Khari Baoli, Delhi'
  }
];

// Main App Component
const App = () => {
  const [currentPage, setCurrentPage] = useState('home');
  const [user, setUser] = useState(null);
  const [cart, setCart] = useState([]);
  const [orders, setOrders] = useState([]);
  const [language, setLanguage] = useState('en');
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const addToCart = (product, quantity = 1) => {
    setCart(prev => {
      const existing = prev.find(item => item.id === product.id);
      if (existing) {
        return prev.map(item =>
          item.id === product.id
            ? { ...item, quantity: item.quantity + quantity }
            : item
        );
      }
      return [...prev, { ...product, quantity }];
    });
    alert(`${product.name} added to cart!`);
  };

  const removeFromCart = (productId) => {
    setCart(prev => prev.filter(item => item.id !== productId));
  };

  const updateCartQuantity = (productId, newQuantity) => {
    if (newQuantity <= 0) {
      removeFromCart(productId);
      return;
    }
    setCart(prev =>
      prev.map(item =>
        item.id === productId
          ? { ...item, quantity: newQuantity }
          : item
      )
    );
  };

  const getTotalPrice = () => {
    return cart.reduce((total, item) => total + (item.price * item.quantity), 0);
  };

  const contextValue = {
    currentPage,
    setCurrentPage,
    user,
    setUser,
    cart,
    setCart,
    orders,
    setOrders,
    language,
    setLanguage,
    selectedProduct,
    setSelectedProduct,
    addToCart,
    removeFromCart,
    updateCartQuantity,
    getTotalPrice,
    isMenuOpen,
    setIsMenuOpen
  };

  return (
    <AppContext.Provider value={contextValue}>
      <div className="min-h-screen bg-gray-50">
        <Header />
        <main>
          {currentPage === 'home' && <HomePage />}
          {currentPage === 'products' && <ProductsPage />}
          {currentPage === 'product-detail' && <ProductDetailPage />}
          {currentPage === 'cart' && <CartPage />}
          {currentPage === 'checkout' && <CheckoutPage />}
          {currentPage === 'login' && <LoginPage />}
          {currentPage === 'signup' && <SignupPage />}
          {currentPage === 'dashboard' && <DashboardPage />}
          {currentPage === 'orders' && <OrdersPage />}
          {currentPage === 'suppliers' && <SuppliersPage />}
          {currentPage === 'help' && <HelpPage />}
        </main>
      </div>
    </AppContext.Provider>
  );
};

// Header Component
const Header = () => {
  const { currentPage, setCurrentPage, user, cart, language, setLanguage, isMenuOpen, setIsMenuOpen } = useContext(AppContext);

  return (
    <header className="bg-white shadow-md sticky top-0 z-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <div className="flex items-center">
            <button 
              onClick={() => setCurrentPage('home')}
              className="text-2xl font-bold text-orange-600"
            >
              VendorMart
            </button>
          </div>

          {/* Desktop Navigation */}
          <nav className="hidden md:flex space-x-8">
            <button 
              onClick={() => setCurrentPage('home')}
              className={`${currentPage === 'home' ? 'text-orange-600' : 'text-gray-700'} hover:text-orange-600 transition-colors`}
            >
              Home
            </button>
            <button 
              onClick={() => setCurrentPage('products')}
              className={`${currentPage === 'products' ? 'text-orange-600' : 'text-gray-700'} hover:text-orange-600 transition-colors`}
            >
              Products
            </button>
            <button 
              onClick={() => setCurrentPage('suppliers')}
              className={`${currentPage === 'suppliers' ? 'text-orange-600' : 'text-gray-700'} hover:text-orange-600 transition-colors`}
            >
              Suppliers
            </button>
            <button 
              onClick={() => setCurrentPage('help')}
              className={`${currentPage === 'help' ? 'text-orange-600' : 'text-gray-700'} hover:text-orange-600 transition-colors`}
            >
              Help
            </button>
          </nav>

          {/* Right side buttons */}
          <div className="flex items-center space-x-4">
            <button
              onClick={() => setLanguage(language === 'en' ? 'hi' : 'en')}
              className="p-2 hover:bg-gray-100 rounded-full transition-colors"
              title="Toggle Language"
            >
              <Globe className="w-5 h-5" />
            </button>

            <button 
              onClick={() => setCurrentPage('cart')}
              className="relative p-2 hover:bg-gray-100 rounded-full transition-colors"
            >
              <ShoppingCart className="w-6 h-6" />
              {cart.length > 0 && (
                <span className="absolute -top-1 -right-1 bg-orange-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">
                  {cart.reduce((sum, item) => sum + item.quantity, 0)}
                </span>
              )}
            </button>

            {user ? (
              <div className="flex items-center space-x-2">
                <button 
                  onClick={() => setCurrentPage('dashboard')}
                  className="flex items-center space-x-2 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors"
                >
                  <User className="w-5 h-5" />
                  <span className="hidden sm:block">{user.name}</span>
                </button>
              </div>
            ) : (
              <button 
                onClick={() => setCurrentPage('login')}
                className="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors"
              >
                Login
              </button>
            )}

            {/* Mobile menu button */}
            <button 
              onClick={() => setIsMenuOpen(!isMenuOpen)}
              className="md:hidden p-2 hover:bg-gray-100 rounded-full transition-colors"
            >
              {isMenuOpen ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
            </button>
          </div>
        </div>

        {/* Mobile Navigation */}
        {isMenuOpen && (
          <div className="md:hidden border-t border-gray-200 py-4">
            <nav className="flex flex-col space-y-2">
              <button 
                onClick={() => { setCurrentPage('home'); setIsMenuOpen(false); }}
                className="text-left px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors"
              >
                Home
              </button>
              <button 
                onClick={() => { setCurrentPage('products'); setIsMenuOpen(false); }}
                className="text-left px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors"
              >
                Products
              </button>
              <button 
                onClick={() => { setCurrentPage('suppliers'); setIsMenuOpen(false); }}
                className="text-left px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors"
              >
                Suppliers
              </button>
              <button 
                onClick={() => { setCurrentPage('help'); setIsMenuOpen(false); }}
                className="text-left px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors"
              >
                Help
              </button>
            </nav>
          </div>
        )}
      </div>
    </header>
  );
};

// Home Page Component
const HomePage = () => {
  const { setCurrentPage, user } = useContext(AppContext);

  return (
    <div>
      {/* Hero Section */}
      <section className="bg-gradient-to-r from-orange-500 to-red-600 text-white py-20">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <h1 className="text-4xl md:text-6xl font-bold mb-6">
            Raw Materials for Street Food Vendors
          </h1>
          <p className="text-xl md:text-2xl mb-8 opacity-90">
            Get quality ingredients delivered fast to your food stall
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <button 
              onClick={() => setCurrentPage(user ? 'products' : 'signup')}
              className="bg-white text-orange-600 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors"
            >
              {user ? 'Browse Products' : 'Sign Up Now'}
            </button>
            <button 
              onClick={() => setCurrentPage('products')}
              className="border-2 border-white text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white hover:text-orange-600 transition-colors"
            >
              View Products
            </button>
          </div>
        </div>
      </section>

      {/* Features Section */}
      <section className="py-16 bg-white">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <h2 className="text-3xl font-bold text-center mb-12">Why Choose VendorMart?</h2>
          <div className="grid md:grid-cols-3 gap-8">
            <div className="text-center p-6">
              <div className="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                <Truck className="w-8 h-8 text-orange-600" />
              </div>
              <h3 className="text-xl font-semibold mb-2">Fast Delivery</h3>
              <p className="text-gray-600">Get your raw materials delivered within 1-6 hours</p>
            </div>
            <div className="text-center p-6">
              <div className="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                <Star className="w-8 h-8 text-orange-600" />
              </div>
              <h3 className="text-xl font-semibold mb-2">Quality Products</h3>
              <p className="text-gray-600">Sourced from trusted suppliers with quality guarantee</p>
            </div>
            <div className="text-center p-6">
              <div className="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                <Phone className="w-8 h-8 text-orange-600" />
              </div>
              <h3 className="text-xl font-semibold mb-2">24/7 Support</h3>
              <p className="text-gray-600">Get help anytime through WhatsApp or phone</p>
            </div>
          </div>
        </div>
      </section>

      {/* Popular Products */}
      <section className="py-16 bg-gray-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center mb-8">
            <h2 className="text-3xl font-bold">Popular Products</h2>
            <button 
              onClick={() => setCurrentPage('products')}
              className="text-orange-600 hover:text-orange-700 font-semibold"
            >
              View All →
            </button>
          </div>
          <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {products.slice(0, 3).map(product => (
              <ProductCard key={product.id} product={product} />
            ))}
          </div>
        </div>
      </section>
    </div>
  );
};

// Product Card Component
const ProductCard = ({ product }) => {
  const { addToCart, setCurrentPage, setSelectedProduct } = useContext(AppContext);

  const handleProductClick = () => {
    setSelectedProduct(product);
    setCurrentPage('product-detail');
  };

  return (
    <div className="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
      <img 
        src={product.image} 
        alt={product.name} 
        className="w-full h-48 object-cover cursor-pointer"
        onClick={handleProductClick}
      />
      <div className="p-4">
        <h3 
          className="font-semibold text-lg mb-2 cursor-pointer hover:text-orange-600"
          onClick={handleProductClick}
        >
          {product.name}
        </h3>
        <p className="text-gray-600 text-sm mb-2">{product.supplier}</p>
        <div className="flex items-center mb-2">
          <Star className="w-4 h-4 text-yellow-400 fill-current" />
          <span className="text-sm text-gray-600 ml-1">{product.rating}</span>
          <span className="text-sm text-gray-600 ml-2 flex items-center">
            <Clock className="w-4 h-4 mr-1" />
            {product.deliveryTime}
          </span>
        </div>
        <div className="flex justify-between items-center">
          <div>
            <span className="text-2xl font-bold text-orange-600">₹{product.price}</span>
            <span className="text-gray-600 text-sm ml-1">{product.unit}</span>
          </div>
          <button 
            onClick={() => addToCart(product)}
            className="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors"
          >
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  );
};

// Products Page Component
const ProductsPage = () => {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('All');
  const [sortBy, setSortBy] = useState('name');

  const categories = ['All', 'Grains', 'Oil', 'Spices', 'Vegetables', 'Packaging'];

  const filteredProducts = products
    .filter(product => 
      product.name.toLowerCase().includes(searchTerm.toLowerCase()) &&
      (selectedCategory === 'All' || product.category === selectedCategory)
    )
    .sort((a, b) => {
      if (sortBy === 'price') return a.price - b.price;
      if (sortBy === 'rating') return b.rating - a.rating;
      return a.name.localeCompare(b.name);
    });

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <h1 className="text-3xl font-bold mb-8">All Products</h1>
      
      {/* Search and Filters */}
      <div className="bg-white rounded-lg shadow-md p-6 mb-8">
        <div className="flex flex-col md:flex-row gap-4">
          <div className="flex-1">
            <div className="relative">
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
              <input
                type="text"
                placeholder="Search products..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              />
            </div>
          </div>
          <div className="flex gap-4">
            <select
              value={selectedCategory}
              onChange={(e) => setSelectedCategory(e.target.value)}
              className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
            >
              {categories.map(category => (
                <option key={category} value={category}>{category}</option>
              ))}
            </select>
            <select
              value={sortBy}
              onChange={(e) => setSortBy(e.target.value)}
              className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
            >
              <option value="name">Sort by Name</option>
              <option value="price">Sort by Price</option>
              <option value="rating">Sort by Rating</option>
            </select>
          </div>
        </div>
      </div>

      {/* Products Grid */}
      <div className="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {filteredProducts.map(product => (
          <ProductCard key={product.id} product={product} />
        ))}
      </div>

      {filteredProducts.length === 0 && (
        <div className="text-center py-12">
          <p className="text-gray-500 text-lg">No products found matching your criteria.</p>
        </div>
      )}
    </div>
  );
};

// Product Detail Page Component
const ProductDetailPage = () => {
  const { selectedProduct, addToCart, setCurrentPage } = useContext(AppContext);
  const [quantity, setQuantity] = useState(1);

  if (!selectedProduct) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <p>Product not found.</p>
        <button 
          onClick={() => setCurrentPage('products')}
          className="text-orange-600 hover:text-orange-700"
        >
          ← Back to Products
        </button>
      </div>
    );
  }

  const handleAddToCart = () => {
    addToCart(selectedProduct, quantity);
    setQuantity(1);
  };

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <button 
        onClick={() => setCurrentPage('products')}
        className="flex items-center text-orange-600 hover:text-orange-700 mb-6"
      >
        <ArrowLeft className="w-5 h-5 mr-2" />
        Back to Products
      </button>

      <div className="bg-white rounded-lg shadow-md overflow-hidden">
        <div className="md:flex">
          <div className="md:w-1/2">
            <img 
              src={selectedProduct.image} 
              alt={selectedProduct.name} 
              className="w-full h-96 object-cover"
            />
          </div>
          <div className="md:w-1/2 p-8">
            <h1 className="text-3xl font-bold mb-4">{selectedProduct.name}</h1>
            <p className="text-gray-600 mb-4">{selectedProduct.description}</p>
            
            <div className="flex items-center mb-4">
              <Star className="w-5 h-5 text-yellow-400 fill-current" />
              <span className="text-lg ml-2">{selectedProduct.rating}</span>
              <span className="text-gray-600 ml-4">by {selectedProduct.supplier}</span>
            </div>

            <div className="flex items-center mb-6">
              <Clock className="w-5 h-5 text-gray-400 mr-2" />
              <span className="text-gray-600">Delivery: {selectedProduct.deliveryTime}</span>
            </div>

            <div className="mb-6">
              <span className="text-4xl font-bold text-orange-600">₹{selectedProduct.price}</span>
              <span className="text-gray-600 text-lg ml-2">{selectedProduct.unit}</span>
            </div>

            <div className="flex items-center mb-6">
              <label className="text-gray-700 mr-4">Quantity:</label>
              <div className="flex items-center border border-gray-300 rounded-lg">
                <button 
                  onClick={() => setQuantity(Math.max(1, quantity - 1))}
                  className="p-2 hover:bg-gray-100 transition-colors"
                >
                  <Minus className="w-4 h-4" />
                </button>
                <span className="px-4 py-2 border-x border-gray-300">{quantity}</span>
                <button 
                  onClick={() => setQuantity(quantity + 1)}
                  className="p-2 hover:bg-gray-100 transition-colors"
                >
                  <Plus className="w-4 h-4" />
                </button>
              </div>
            </div>

            <button 
              onClick={handleAddToCart}
              className="w-full bg-orange-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-orange-700 transition-colors"
            >
              Add to Cart - ₹{selectedProduct.price * quantity}
            </button>
          </div>
        </div>
      </div>

      {/* Related Products */}
      <div className="mt-12">
        <h2 className="text-2xl font-bold mb-6">Related Products</h2>
        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {products
            .filter(p => p.category === selectedProduct.category && p.id !== selectedProduct.id)
            .slice(0, 3)
            .map(product => (
              <ProductCard key={product.id} product={product} />
            ))}
        </div>
      </div>
    </div>
  );
};

// Cart Page Component
const CartPage = () => {
  const { cart, removeFromCart, updateCartQuantity, getTotalPrice, setCurrentPage } = useContext(AppContext);

  if (cart.length === 0) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="text-center py-12">
          <ShoppingCart className="w-24 h-24 text-gray-300 mx-auto mb-6" />
          <h2 className="text-2xl font-bold text-gray-700 mb-4">Your cart is empty</h2>
          <p className="text-gray-500 mb-8">Add some products to get started!</p>
          <button 
            onClick={() => setCurrentPage('products')}
            className="bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors"
          >
            Browse Products
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <h1 className="text-3xl font-bold mb-8">Your Cart</h1>
      
      <div className="lg:flex lg:gap-8">
        <div className="lg:w-2/3">
          <div className="bg-white rounded-lg shadow-md">
            {cart.map(item => (
              <div key={item.id} className="p-6 border-b border-gray-200 last:border-b-0">
                <div className="flex items-center">
                  <img 
                    src={item.image} 
                    alt={item.name} 
                    className="w-20 h-20 object-cover rounded-lg mr-4"
                  />
                  <div className="flex-1">
                    <h3 className="font-semibold text-lg">{item.name}</h3>
                    <p className="text-gray-600">{item.supplier}</p>
                    <p className="text-orange-600 font-semibold">₹{item.price} {item.unit}</p>
                  </div>
                  <div className="flex items-center space-x-4">
                    <div className="flex items-center border border-gray-300 rounded-lg">
                      <button 
                        onClick={() => updateCartQuantity(item.id, item.quantity - 1)}
                        className="p-2 hover:bg-gray-100 transition-colors"
                      >
                        <Minus className="w-4 h-4" />
                      </button>
                      <span className="px-4 py-2 border-x border-gray-300">{item.quantity}</span>
                      <button 
                        onClick={() => updateCartQuantity(item.id, item.quantity + 1)}
                        className="p-2 hover:bg-gray-100 transition-colors"
                      >
                        <Plus className="w-4 h-4" />
                      </button>
                    </div>
                    <div className="text-right">
                      <p className="font-semibold">₹{item.price * item.quantity}</p>
                      <button 
                        onClick={() => removeFromCart(item.id)}
                        className="text-red-600 hover:text-red-700 text-sm"
                      >
                        Remove
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        <div className="lg:w-1/3 mt-8 lg:mt-0">
          <div className="bg-white rounded-lg shadow-md p-6">
            <h2 className="text-xl font-bold mb-4">Order Summary</h2>
            <div className="space-y-2 mb-4">
              <div className="flex justify-between">
                <span>Subtotal:</span>
                <span>₹{getTotalPrice()}</span>
              </div>
              <div className="flex justify-between">
                <span>Delivery:</span>
                <span>₹50</span>
              </div>
              <div className="border-t pt-2">
                <div className="flex justify-between font-bold text-lg">
                  <span>Total:</span>
                  <span>₹{getTotalPrice() + 50}</span>
                </div>
              </div>
            </div>
            <button 
              onClick={() => setCurrentPage('checkout')}
              className="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors"
            >
              Proceed to Checkout
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

// Checkout Page Component
const CheckoutPage = () => {
  const { cart, getTotalPrice, setCurrentPage, setOrders, setCart, user } = useContext(AppContext);
  const [address, setAddress] = useState('');
  const [deliveryTime, setDeliveryTime] = useState('1-2 hours');
  const [paymentMethod, setPaymentMethod] = useState('cod');

  const handlePlaceOrder = () => {
    if (!address.trim()) {
      alert('Please enter your delivery address');
      return;
    }

    const newOrder = {
      id: Date.now(),
      items: [...cart],
      total: getTotalPrice() + 50,
      address,
      deliveryTime,
      paymentMethod,
      status: 'Ordered',
      orderDate: new Date().toLocaleDateString()
    };

    setOrders(prev => [...prev, newOrder]);
    setCart([]);
    alert('Order placed successfully! You can track your order in the Orders section.');
    setCurrentPage('orders');
  };

  if (cart.length === 0) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="text-center py-12">
          <p className="text-gray-500 text-lg mb-4">No items in cart</p>
          <button 
            onClick={() => setCurrentPage('products')}
            className="bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors"
          >
            Browse Products
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <button 
        onClick={() => setCurrentPage('cart')}
        className="flex items-center text-orange-600 hover:text-orange-700 mb-6"
      >
        <ArrowLeft className="w-5 h-5 mr-2" />
        Back to Cart
      </button>

      <h1 className="text-3xl font-bold mb-8">Checkout</h1>

      <div className="grid lg:grid-cols-2 gap-8">
        <div className="space-y-6">
          {/* Delivery Address */}
          <div className="bg-white rounded-lg shadow-md p-6">
            <h2 className="text-xl font-bold mb-4">Delivery Address</h2>
            <textarea
              value={address}
              onChange={(e) => setAddress(e.target.value)}
              placeholder="Enter your complete address..."
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              rows="3"
            />
          </div>

          {/* Delivery Time */}
          <div className="bg-white rounded-lg shadow-md p-6">
            <h2 className="text-xl font-bold mb-4">Delivery Time</h2>
            <select
              value={deliveryTime}
              onChange={(e) => setDeliveryTime(e.target.value)}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
            >
              <option value="1-2 hours">1-2 hours</option>
              <option value="2-4 hours">2-4 hours</option>
              <option value="4-6 hours">4-6 hours</option>
              <option value="Next day">Next day</option>
            </select>
          </div>

          {/* Payment Method */}
          <div className="bg-white rounded-lg shadow-md p-6">
            <h2 className="text-xl font-bold mb-4">Payment Method</h2>
            <div className="space-y-3">
              <label className="flex items-center">
                <input
                  type="radio"
                  value="cod"
                  checked={paymentMethod === 'cod'}
                  onChange={(e) => setPaymentMethod(e.target.value)}
                  className="mr-3"
                />
                <span>Cash on Delivery (COD)</span>
              </label>
              <label className="flex items-center">
                <input
                  type="radio"
                  value="upi"
                  checked={paymentMethod === 'upi'}
                  onChange={(e) => setPaymentMethod(e.target.value)}
                  className="mr-3"
                />
                <span>UPI Payment</span>
              </label>
            </div>
          </div>
        </div>

        <div>
          {/* Order Summary */}
          <div className="bg-white rounded-lg shadow-md p-6">
            <h2 className="text-xl font-bold mb-4">Order Summary</h2>
            <div className="space-y-3 mb-4">
              {cart.map(item => (
                <div key={item.id} className="flex justify-between text-sm">
                  <span>{item.name} × {item.quantity}</span>
                  <span>₹{item.price * item.quantity}</span>
                </div>
              ))}
            </div>
            <div className="border-t pt-4 space-y-2">
              <div className="flex justify-between">
                <span>Subtotal:</span>
                <span>₹{getTotalPrice()}</span>
              </div>
              <div className="flex justify-between">
                <span>Delivery Fee:</span>
                <span>₹50</span>
              </div>
              <div className="flex justify-between font-bold text-lg">
                <span>Total:</span>
                <span>₹{getTotalPrice() + 50}</span>
              </div>
            </div>
            <button 
              onClick={handlePlaceOrder}
              className="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors mt-6"
            >
              Place Order
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

// Login Page Component
const LoginPage = () => {
  const { setUser, setCurrentPage } = useContext(AppContext);
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleLogin = (e) => {
    e.preventDefault();
    if (email && password) {
      setUser({
        id: 1,
        name: 'Raj Kumar',
        email: email,
        phone: '+91 9876543210',
        businessName: 'Raj\'s Chaat Corner'
      });
      alert('Login successful!');
      setCurrentPage('dashboard');
    } else {
      alert('Please fill in all fields');
    }
  };

  return (
    <div className="max-w-md mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div className="bg-white rounded-lg shadow-md p-8">
        <h1 className="text-2xl font-bold text-center mb-6">Login to VendorMart</h1>
        <form onSubmit={handleLogin} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Enter your email"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Password</label>
            <input
              type="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Enter your password"
              required
            />
          </div>
          <button 
            type="submit"
            className="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors"
          >
            Login
          </button>
        </form>
        <div className="text-center mt-6">
          <p className="text-gray-600">
            Don't have an account?{' '}
            <button 
              onClick={() => setCurrentPage('signup')}
              className="text-orange-600 hover:text-orange-700 font-semibold"
            >
              Sign up
            </button>
          </p>
        </div>
      </div>
    </div>
  );
};

// Signup Page Component
const SignupPage = () => {
  const { setUser, setCurrentPage } = useContext(AppContext);
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    phone: '',
    businessName: '',
    password: '',
    confirmPassword: ''
  });

  const handleChange = (e) => {
    setFormData(prev => ({
      ...prev,
      [e.target.name]: e.target.value
    }));
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    if (formData.password !== formData.confirmPassword) {
      alert('Passwords do not match');
      return;
    }
    if (Object.values(formData).some(field => !field.trim())) {
      alert('Please fill in all fields');
      return;
    }

    setUser({
      id: 1,
      name: formData.name,
      email: formData.email,
      phone: formData.phone,
      businessName: formData.businessName
    });
    alert('Account created successfully!');
    setCurrentPage('dashboard');
  };

  return (
    <div className="max-w-md mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div className="bg-white rounded-lg shadow-md p-8">
        <h1 className="text-2xl font-bold text-center mb-6">Create Account</h1>
        <form onSubmit={handleSubmit} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
            <input
              type="text"
              name="name"
              value={formData.name}
              onChange={handleChange}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Enter your full name"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
            <input
              type="email"
              name="email"
              value={formData.email}
              onChange={handleChange}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Enter your email"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
            <input
              type="tel"
              name="phone"
              value={formData.phone}
              onChange={handleChange}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Enter your phone number"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Business Name</label>
            <input
              type="text"
              name="businessName"
              value={formData.businessName}
              onChange={handleChange}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Enter your business name"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Password</label>
            <input
              type="password"
              name="password"
              value={formData.password}
              onChange={handleChange}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Enter your password"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
            <input
              type="password"
              name="confirmPassword"
              value={formData.confirmPassword}
              onChange={handleChange}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
              placeholder="Confirm your password"
              required
            />
          </div>
          <button 
            type="submit"
            className="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors"
          >
            Create Account
          </button>
        </form>
        <div className="text-center mt-6">
          <p className="text-gray-600">
            Already have an account?{' '}
            <button 
              onClick={() => setCurrentPage('login')}
              className="text-orange-600 hover:text-orange-700 font-semibold"
            >
              Login
            </button>
          </p>
        </div>
      </div>
    </div>
  );
};

// Dashboard Page Component
const DashboardPage = () => {
  const { user, setUser, setCurrentPage, orders } = useContext(AppContext);

  const handleLogout = () => {
    setUser(null);
    setCurrentPage('home');
    alert('Logged out successfully!');
  };

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex justify-between items-center mb-8">
        <h1 className="text-3xl font-bold">Welcome, {user?.name}!</h1>
        <button 
          onClick={handleLogout}
          className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"
        >
          Logout
        </button>
      </div>

      <div className="grid lg:grid-cols-3 gap-8">
        <div className="lg:col-span-2">
          {/* Quick Actions */}
          <div className="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 className="text-xl font-bold mb-4">Quick Actions</h2>
            <div className="grid sm:grid-cols-2 gap-4">
              <button 
                onClick={() => setCurrentPage('products')}
                className="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left"
              >
                <ShoppingCart className="w-8 h-8 text-orange-600 mb-2" />
                <h3 className="font-semibold">Browse Products</h3>
                <p className="text-gray-600 text-sm">Find raw materials for your business</p>
              </button>
              <button 
                onClick={() => setCurrentPage('orders')}
                className="p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left"
              >
                <Package className="w-8 h-8 text-orange-600 mb-2" />
                <h3 className="font-semibold">View Orders</h3>
                <p className="text-gray-600 text-sm">Track your order status</p>
              </button>
            </div>
          </div>

          {/* Recommended Products */}
          <div className="bg-white rounded-lg shadow-md p-6">
            <h2 className="text-xl font-bold mb-4">Recommended for You</h2>
            <div className="grid sm:grid-cols-2 gap-4">
              {products.slice(0, 4).map(product => (
                <div key={product.id} className="border border-gray-200 rounded-lg p-4">
                  <img 
                    src={product.image} 
                    alt={product.name} 
                    className="w-full h-32 object-cover rounded-lg mb-3"
                  />
                  <h3 className="font-semibold mb-1">{product.name}</h3>
                  <p className="text-orange-600 font-bold">₹{product.price} {product.unit}</p>
                </div>
              ))}
            </div>
          </div>
        </div>

        <div>
          {/* Profile Card */}
          <div className="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 className="text-xl font-bold mb-4">Your Profile</h2>
            <div className="space-y-3">
              <div>
                <label className="text-gray-600">Name:</label>
                <p className="font-semibold">{user?.name}</p>
              </div>
              <div>
                <label className="text-gray-600">Business:</label>
                <p className="font-semibold">{user?.businessName}</p>
              </div>
              <div>
                <label className="text-gray-600">Email:</label>
                <p className="font-semibold">{user?.email}</p>
              </div>
              <div>
                <label className="text-gray-600">Phone:</label>
                <p className="font-semibold">{user?.phone}</p>
              </div>
            </div>
          </div>

          {/* Recent Orders */}
          <div className="bg-white rounded-lg shadow-md p-6">
            <h2 className="text-xl font-bold mb-4">Recent Orders</h2>
            {orders.length > 0 ? (
              <div className="space-y-3">
                {orders.slice(-3).map(order => (
                  <div key={order.id} className="border border-gray-200 rounded-lg p-3">
                    <div className="flex justify-between items-center">
                      <span className="font-semibold">Order #{order.id}</span>
                      <span className="text-sm text-green-600">{order.status}</span>
                    </div>
                    <p className="text-gray-600 text-sm">₹{order.total}</p>
                  </div>
                ))}
                <button 
                  onClick={() => setCurrentPage('orders')}
                  className="w-full text-orange-600 hover:text-orange-700 font-semibold text-sm"
                >
                  View All Orders →
                </button>
              </div>
            ) : (
              <p className="text-gray-500">No orders yet</p>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

// Orders Page Component
const OrdersPage = () => {
  const { orders, setCurrentPage } = useContext(AppContext);

  const getStatusColor = (status) => {
    switch (status) {
      case 'Ordered': return 'text-blue-600 bg-blue-100';
      case 'Packed': return 'text-yellow-600 bg-yellow-100';
      case 'On The Way': return 'text-orange-600 bg-orange-100';
      case 'Delivered': return 'text-green-600 bg-green-100';
      default: return 'text-gray-600 bg-gray-100';
    }
  };

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <h1 className="text-3xl font-bold mb-8">Your Orders</h1>

      {orders.length === 0 ? (
        <div className="text-center py-12">
          <Package className="w-24 h-24 text-gray-300 mx-auto mb-6" />
          <h2 className="text-2xl font-bold text-gray-700 mb-4">No orders yet</h2>
          <p className="text-gray-500 mb-8">Start shopping to see your orders here!</p>
          <button 
            onClick={() => setCurrentPage('products')}
            className="bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors"
          >
            Browse Products
          </button>
        </div>
      ) : (
        <div className="space-y-6">
          {orders.map(order => (
            <div key={order.id} className="bg-white rounded-lg shadow-md p-6">
              <div className="flex justify-between items-start mb-4">
                <div>
                  <h3 className="text-xl font-bold">Order #{order.id}</h3>
                  <p className="text-gray-600">Placed on {order.orderDate}</p>
                </div>
                <span className={`px-3 py-1 rounded-full text-sm font-semibold ${getStatusColor(order.status)}`}>
                  {order.status}
                </span>
              </div>
              
              <div className="grid md:grid-cols-2 gap-6">
                <div>
                  <h4 className="font-semibold mb-2">Items Ordered:</h4>
                  <div className="space-y-2">
                    {order.items.map(item => (
                      <div key={item.id} className="flex justify-between text-sm">
                        <span>{item.name} × {item.quantity}</span>
                        <span>₹{item.price * item.quantity}</span>
                      </div>
                    ))}
                  </div>
                </div>
                
                <div>
                  <h4 className="font-semibold mb-2">Delivery Details:</h4>
                  <p className="text-sm text-gray-600 mb-2">Expected: {order.deliveryTime}</p>
                  <p className="text-sm text-gray-600 mb-2">Payment: {order.paymentMethod.toUpperCase()}</p>
                  <p className="text-sm text-gray-600">Address: {order.address}</p>
                </div>
              </div>
              
              <div className="border-t pt-4 mt-4">
                <div className="flex justify-between items-center">
                  <span className="text-lg font-bold">Total: ₹{order.total}</span>
                  {order.status === 'Delivered' && (
                    <button className="text-orange-600 hover:text-orange-700 font-semibold">
                      Reorder
                    </button>
                  )}
                </div>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};

// Suppliers Page Component
const SuppliersPage = () => {
  const { setCurrentPage } = useContext(AppContext);

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <h1 className="text-3xl font-bold mb-8">Our Suppliers</h1>
      
      <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {suppliers.map(supplier => (
          <div key={supplier.id} className="bg-white rounded-lg shadow-md p-6">
            <h3 className="text-xl font-bold mb-2">{supplier.name}</h3>
            <div className="flex items-center mb-2">
              <Star className="w-4 h-4 text-yellow-400 fill-current mr-1" />
              <span className="text-gray-600">{supplier.rating} • {supplier.products} products</span>
            </div>
            <div className="flex items-center mb-4">
              <MapPin className="w-4 h-4 text-gray-400 mr-2" />
              <span className="text-gray-600">{supplier.location}</span>
            </div>
            <div className="flex items-center mb-4">
              <Clock className="w-4 h-4 text-gray-400 mr-2" />
              <span className="text-gray-600">Delivery: {supplier.deliveryTime}</span>
            </div>
            <button 
              onClick={() => setCurrentPage('products')}
              className="w-full bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors"
            >
              View Products
            </button>
          </div>
        ))}
      </div>
    </div>
  );
};

// Help Page Component
const HelpPage = () => {
  const [selectedFaq, setSelectedFaq] = useState(null);

  const faqs = [
    {
      question: "How do I place an order?",
      answer: "Browse our products, add items to cart, and proceed to checkout. Fill in your delivery details and choose payment method."
    },
    {
      question: "What are the delivery charges?",
      answer: "We charge a flat delivery fee of ₹50 for all orders. Free delivery is available for orders above ₹1000."
    },
    {
      question: "Can I cancel my order?",
      answer: "Yes, you can cancel your order within 30 minutes of placing it. Contact our support team for assistance."
    },
    {
      question: "What payment methods do you accept?",
      answer: "We accept Cash on Delivery (COD) and UPI payments. Online payment options are coming soon."
    }
  ];

  return (
    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <h1 className="text-3xl font-bold mb-8">Help & Support</h1>
      
      <div className="grid lg:grid-cols-2 gap-8">
        <div>
          <h2 className="text-2xl font-bold mb-6">Contact Us</h2>
          <div className="bg-white rounded-lg shadow-md p-6 space-y-4">
            <div className="flex items-center">
              <Phone className="w-5 h-5 text-orange-600 mr-3" />
              <div>
                <p className="font-semibold">Phone Support</p>
                <p className="text-gray-600">+91 1234567890</p>
              </div>
            </div>
            
            <div className="flex items-center">
              <Phone className="w-5 h-5 text-green-600 mr-3" />
              <div>
                <p className="font-semibold">WhatsApp</p>
                <button className="text-green-600 hover:text-green-700">
                  Chat with us on WhatsApp
                </button>
              </div>
            </div>
            
            <div className="flex items-center">
              <User className="w-5 h-5 text-blue-600 mr-3" />
              <div>
                <p className="font-semibold">Email Support</p>
                <p className="text-gray-600">support@vendormart.com</p>
              </div>
            </div>
          </div>
        </div>

        <div>
          <h2 className="text-2xl font-bold mb-6">Frequently Asked Questions</h2>
          <div className="bg-white rounded-lg shadow-md p-6">
            <div className="space-y-4">
              {faqs.map((faq, index) => (
                <div key={index} className="border-b border-gray-200 last:border-b-0 pb-4 last:pb-0">
                  <button 
                    onClick={() => setSelectedFaq(selectedFaq === index ? null : index)}
                    className="w-full text-left font-semibold hover:text-orange-600 transition-colors"
                  >
                    {faq.question}
                  </button>
                  {selectedFaq === index && (
                    <p className="text-gray-600 mt-2">{faq.answer}</p>
                  )}
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>

      {/* About Section */}
      <div className="mt-12">
        <h2 className="text-2xl font-bold mb-6">About VendorMart</h2>
        <div className="bg-white rounded-lg shadow-md p-6">
          <p className="text-gray-600 mb-4">
            VendorMart is India's leading platform connecting street food vendors with trusted suppliers. 
            We understand the unique needs of street food businesses and provide quality raw materials 
            with fast delivery at competitive prices.
          </p>
          <p className="text-gray-600 mb-4">
            Our mission is to empower street food vendors by making procurement easy, reliable, and affordable. 
            We work with verified suppliers across India to ensure you get the best products for your business.
          </p>
          <div className="grid md:grid-cols-3 gap-6 mt-6">
            <div className="text-center">
              <div className="text-3xl font-bold text-orange-600 mb-2">500+</div>
              <p className="text-gray-600">Happy Vendors</p>
            </div>
            <div className="text-center">
              <div className="text-3xl font-bold text-orange-600 mb-2">50+</div>
              <p className="text-gray-600">Trusted Suppliers</p>
            </div>
            <div className="text-center">
              <div className="text-3xl font-bold text-orange-600 mb-2">1000+</div>
              <p className="text-gray-600">Products Available</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default App;